{"ast":null,"code":"import { setStore, removeStore } from \"../../../components/config/mUtils\";\nimport { searchRestaurant } from \"../../../service/api\";\nconst SET_STORE_VALUE = \"SET_STORE_VALUE\";\nconst INSERT_STORE_DATA = \"INSERT_STORE_DATA\";\nconst REMOVE_STORE_DATA = \"REMOVE_STORE_DATA\";\nconst CLEAR_STORE_DATA = \"CLEAR_STORE_DATA\";\nconst SET_RESTAURAN_DATA = \"SET_RESTAURAN_DATA\"; //设置默认数据\n\nconst defaultState = {\n  value: \"\",\n  clear: false,\n  list: [],\n  emptyResult: false,\n  // 搜索结果为空时显示\n  restaurantList: [],\n  // 搜索返回的结果\n  historyValue: []\n};\nexport default ((state = defaultState, action) => {\n  let newState = JSON.parse(JSON.stringify(state));\n\n  switch (action.type) {\n    //获取输入框数据\n    case \"SET_STORE_VALUE\":\n      //console.log(action.value)\n      //将新派发的value 赋值给newState\n      newState.value = action.value;\n      newState.restaurantList = [];\n\n      if (!newState.value) {\n        newState.clear = true;\n      } else {\n        newState.clear = false;\n        newState.emptyResult = false;\n      }\n\n      console.log(newState.value);\n      return newState;\n    //提交数据\n\n    case \"INSERT_STORE_DATA\":\n      if (!newState.value) {\n        console.log(1111);\n        return newState;\n      } else {\n        newState.list.push(newState.value);\n        setStore('historyValue', newState.value); // newState.value = \"\"\n        // newState.clear = true\n\n        return newState;\n      }\n\n    //移除单条历史记录           \n\n    case \"REMOVE_STORE_DATA\":\n      newState.list.splice(action.index, 1);\n      return newState;\n    //清空历史记录\n\n    case \"CLEAR_STORE_DATA\":\n      newState.list = [];\n      removeStore(\"historyValue\");\n      newState.clear = false;\n      return newState;\n    //查询商家列表\n\n    case \"SET_RESTAURAN_DATA\":\n      // console.log(action.list.status)\n      // console.log(newState)\n      newState.restaurantList = action.list;\n\n      if (action.list.status == 0 || action.list.length == 0) {\n        console.log('没有数据');\n        newState.emptyResult = true;\n      } else {\n        console.log(\"有数据\");\n        console.log(action.list);\n        newState.emptyResult = false; // newState.clear = false\n      }\n\n      console.log(newState);\n      return newState;\n\n    default:\n      return state;\n  }\n});\nexport const getActionChange = value => ({\n  type: SET_STORE_VALUE,\n  //修改之后的值\n  value\n});\nexport const getActionClick = _ => ({\n  type: INSERT_STORE_DATA\n});\nexport const getActionRemove = index => ({\n  type: REMOVE_STORE_DATA,\n  index\n});\nexport const getActionClear = () => ({\n  type: CLEAR_STORE_DATA\n}); //修改数据\n\nconst setRestaurantList = list => ({\n  type: SET_RESTAURAN_DATA,\n  list\n});\n\nexport const getRestaurantList = value => {\n  return dispatch => {\n    searchRestaurant(value).then(res => {\n      dispatch(setRestaurantList(res)); // console.log(res)\n    });\n  };\n};","map":{"version":3,"sources":["C:/Users/asus/Desktop/elm--/elm/src/pages/search/search.reducer/search.reducer.js"],"names":["setStore","removeStore","searchRestaurant","SET_STORE_VALUE","INSERT_STORE_DATA","REMOVE_STORE_DATA","CLEAR_STORE_DATA","SET_RESTAURAN_DATA","defaultState","value","clear","list","emptyResult","restaurantList","historyValue","state","action","newState","JSON","parse","stringify","type","console","log","push","splice","index","status","length","getActionChange","getActionClick","_","getActionRemove","getActionClear","setRestaurantList","getRestaurantList","dispatch","then","res"],"mappings":"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","sourcesContent":["import {setStore,removeStore} from \"../../../components/config/mUtils\"\r\nimport {searchRestaurant} from \"../../../service/api\"\r\nconst SET_STORE_VALUE = \"SET_STORE_VALUE\";\r\nconst INSERT_STORE_DATA = \"INSERT_STORE_DATA\";\r\nconst REMOVE_STORE_DATA = \"REMOVE_STORE_DATA\";\r\nconst CLEAR_STORE_DATA = \"CLEAR_STORE_DATA\";\r\nconst SET_RESTAURAN_DATA = \"SET_RESTAURAN_DATA\";\r\n//设置默认数据\r\nconst defaultState = {\r\n    value:\"\",\r\n    clear:false,\r\n    list:[],\r\n    emptyResult: false, // 搜索结果为空时显示\r\n    restaurantList: [], // 搜索返回的结果\r\n    historyValue:[]\r\n}\r\n\r\nexport default (state=defaultState,action)=>{\r\n    let newState = JSON.parse(JSON.stringify(state));\r\n    switch(action.type){\r\n        //获取输入框数据\r\n        case \"SET_STORE_VALUE\":\r\n            //console.log(action.value)\r\n            //将新派发的value 赋值给newState\r\n            newState.value = action.value;\r\n            newState.restaurantList = [];\r\n            if(!newState.value){\r\n                newState.clear = true\r\n            }else{\r\n                newState.clear = false\r\n                newState.emptyResult = false\r\n            }\r\n            console.log(newState.value)\r\n            return newState;\r\n        //提交数据\r\n        case \"INSERT_STORE_DATA\":\r\n            if(!newState.value){\r\n                console.log(1111)\r\n                return newState\r\n            }else{\r\n                newState.list.push(newState.value)\r\n                setStore('historyValue',newState.value)\r\n                // newState.value = \"\"\r\n                // newState.clear = true\r\n                return newState \r\n            }\r\n        //移除单条历史记录           \r\n        case \"REMOVE_STORE_DATA\":\r\n            newState.list.splice(action.index,1)\r\n            return newState\r\n        //清空历史记录\r\n        case \"CLEAR_STORE_DATA\":\r\n            newState.list = []\r\n            removeStore(\"historyValue\")\r\n            newState.clear = false\r\n            return newState\r\n        //查询商家列表\r\n        case \"SET_RESTAURAN_DATA\":\r\n            // console.log(action.list.status)\r\n            // console.log(newState)\r\n            newState.restaurantList = action.list\r\n            if(action.list.status == 0  || action.list.length == 0){\r\n                console.log('没有数据')\r\n                newState.emptyResult = true\r\n            }else{\r\n                console.log(\"有数据\")\r\n                console.log(action.list)\r\n                newState.emptyResult = false\r\n                // newState.clear = false\r\n            }\r\n            console.log(newState)\r\n            return newState\r\n            \r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const getActionChange = (value)=>({\r\n    type:SET_STORE_VALUE,\r\n    //修改之后的值\r\n    value\r\n})\r\nexport const getActionClick = _=>({\r\n    type:INSERT_STORE_DATA\r\n})\r\nexport const getActionRemove = (index)=>({\r\n    type:REMOVE_STORE_DATA ,\r\n    index,\r\n})\r\nexport const getActionClear = ()=>({\r\n    type:CLEAR_STORE_DATA\r\n})\r\n//修改数据\r\nconst setRestaurantList = (list)=>({\r\n    type:SET_RESTAURAN_DATA,\r\n    list\r\n})\r\nexport const getRestaurantList = (value)=>{\r\n    return (dispatch)=>{\r\n        searchRestaurant(value).then(res=>{\r\n            dispatch(setRestaurantList(res))\r\n            // console.log(res)\r\n        })\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}